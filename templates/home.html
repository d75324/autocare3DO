{% extends 'base.html' %}

{% block title %}AutoCare - Gestión Inteligente de Vehículos{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="page-section" style="background: linear-gradient(135deg, var(--light-green) 0%, white 100%); padding: 4rem 0;">
    <div class="container-modern">
        <div class="row justify-content-center">
            <div class="col-lg-8 text-center animate-on-scroll">
                <h1 style="font-size: 3rem; font-weight: 800; margin-bottom: 1.5rem; color: var(--text-dark); line-height: 1.2;">
                    Bienvenido a <span style="color: var(--primary-green);">AutoCare</span>
                </h1>
                <p style="font-size: 1.3rem; color: var(--text-light); margin-bottom: 2.5rem;">
                    Gestione sus vehículos y los servicios realizados de manera inteligente y eficiente con nuestra plataforma moderna.
                </p>
                <div style="display: flex; gap: 1rem; flex-wrap: wrap; justify-content: center;">
                    <a href="{% url 'register' %}" class="btn btn-yellow btn-lg">
                        <i class="fas fa-rocket"></i>
                        Comenzar Gratis
                    </a>
                    <a href="#features" class="btn btn-outline btn-lg smooth-scroll">
                        <i class="fas fa-info-circle"></i>
                        Más Información
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section id="features" class="page-section">
    <div class="container-modern">
        <div class="text-center mb-5">
            <h2 style="font-size: 2.5rem; font-weight: 700; margin-bottom: 1rem; color: var(--text-dark);">
                Características Principales
            </h2>
            <p style="color: var(--text-light); font-size: 1.2rem;">
                Descubra todo lo que AutoCare puede hacer por usted
            </p>
        </div>
        <div class="row">
            <div class="col-md-4 mb-4 animate-on-scroll">
                <div class="modern-card h-100 text-center">
                    <div style="margin-bottom: 1.5rem;">
                        <i class="fas fa-plus-circle" style="font-size: 3rem; color: var(--primary-green);"></i>
                    </div>
                    <h5 class="card-title-modern" style="justify-content: center;">Registre sus Vehículos</h5>
                    <p style="color: var(--text-light); line-height: 1.8;">
                        Agregue nuevos vehículos a su cuenta y mantenga un registro actualizado de los servicios realizados y sus costos con tecnología de vanguardia.
                    </p>
                </div>
            </div>
            <div class="col-md-4 mb-4 animate-on-scroll">
                <div class="modern-card h-100 text-center">
                    <div style="margin-bottom: 1.5rem;">
                        <i class="fas fa-users" style="font-size: 3rem; color: var(--primary-green);"></i>
                    </div>
                    <h5 class="card-title-modern" style="justify-content: center;">Su mecánico, su equipo</h5>
                    <p style="color: var(--text-light); line-height: 1.8;">
                        Autorice a su mecánico a ingresar información de los trabajos realizados para facilitar el control y colaboración en tiempo real.
                    </p>
                </div>
            </div>
            <div class="col-md-4 mb-4 animate-on-scroll">
                <div class="modern-card h-100 text-center">
                    <div style="margin-bottom: 1.5rem;">
                        <i class="fas fa-chart-pie" style="font-size: 3rem; color: var(--primary-green);"></i>
                    </div>
                    <h5 class="card-title-modern" style="justify-content: center;">Control de Costos más efectivo</h5>
                    <p style="color: var(--text-light); line-height: 1.8;">
                        Sepa en todo momento cuánto está gastando en su automóvil con análisis detallados y reportes inteligentes.
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Stats Section -->
<section class="page-section" style="background: var(--primary-green); color: white; text-align: center;">
    <div class="container-modern animate-on-scroll">
        <div style="margin-bottom: 3rem;">
            <h2 style="font-size: 2.5rem; font-weight: 700; margin-bottom: 1rem; color: white;">
                Nuestra Comunidad en Números
            </h2>
            <p style="color: rgba(255, 255, 255, 0.9); font-size: 1.2rem;">
                Usuarios que confían en AutoCare para gestionar sus vehículos
            </p>
        </div>
        
        <div class="stats-grid">
            <div class="stat-item" style="background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2);">
                <span class="stat-number" data-target="{{ total_vehicles|default:'150' }}" style="color: white; font-size: 3rem;">0</span>
                <span class="stat-label" style="color: rgba(255, 255, 255, 0.9);">Vehículos</span>
            </div>
            <div class="stat-item" style="background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2);">
                <span class="stat-number" data-target="{{ total_mechanics|default:'25' }}" style="color: white; font-size: 3rem;">0</span>
                <span class="stat-label" style="color: rgba(255, 255, 255, 0.9);">Mecánicos</span>
            </div>
            <div class="stat-item" style="background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2);">
                <span class="stat-number" data-target="{{ total_services|default:'500' }}" style="color: white; font-size: 3rem;">0</span>
                <span class="stat-label" style="color: rgba(255, 255, 255, 0.9);">Servicios</span>
            </div>
            <div class="stat-item" style="background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2);">
                <span class="stat-number" data-target="{{ total_users|default:"75" }}" style="color: white; font-size: 3rem;">0</span>
                <span class="stat-label" style="color: rgba(255, 255, 255, 0.9);">Usuarios</span>
            </div>
        </div>
    </div>
</section>

<!-- Benefits Section -->
<section id="benefits" class="page-section" style="background: var(--light-green);">
    <div class="container-modern animate-on-scroll">
        <div class="text-center mb-4"> <!-- Reduced from mb-5 to mb-4 -->
            <h2 style="font-size: 2.5rem; font-weight: 700; margin-bottom: 1rem; color: var(--text-dark);">
                ¿Por qué elegir AutoCare?
            </h2>
            <p style="color: var(--text-light); font-size: 1.2rem;">
                Llevar un control efectivo de servicios y costos asociados a un auto es fundamental por varias razones
            </p>
        </div>
        
        <div class="row">
            <div class="col-lg-8">
                <div class="row">
                    <div class="col-md-6 mb-4">
                        <div style="padding: 1.5rem; background: white; border-radius: 12px; border-left: 4px solid var(--primary-green); box-shadow: var(--shadow-sm); transition: all 0.3s ease; height: 100%;">
                            <h6 style="color: var(--text-dark); margin-bottom: 0.5rem; font-size: 1.1rem; font-weight: 600; display: flex; align-items: center; gap: 0.5rem;">
                                <i class="fas fa-tools" style="color: var(--primary-green);"></i>
                                Mantenimiento Preventivo
                            </h6>
                            <p style="color: var(--text-light); line-height: 1.6; font-size: 0.95rem; margin: 0;">
                                Llevar un registro detallado de los servicios permite programar mantenimientos preventivos de manera adecuada, evitando problemas mayores y costosos a largo plazo.
                            </p>
                        </div>
                    </div>
                    
                    <div class="col-md-6 mb-4">
                        <div style="padding: 1.5rem; background: white; border-radius: 12px; border-left: 4px solid var(--primary-green); box-shadow: var(--shadow-sm); transition: all 0.3s ease; height: 100%;">
                            <h6 style="color: var(--text-dark); margin-bottom: 0.5rem; font-size: 1.1rem; font-weight: 600; display: flex; align-items: center; gap: 0.5rem;">
                                <i class="fas fa-dollar-sign" style="color: var(--primary-green);"></i>
                                Valor de Reventa
                            </h6>
                            <p style="color: var(--text-light); line-height: 1.6; font-size: 0.95rem; margin: 0;">
                                Un historial de mantenimiento bien documentado puede aumentar significativamente el valor de reventa de un vehículo.
                            </p>
                        </div>
                    </div>
                    
                    <div class="col-md-6 mb-4">
                        <div style="padding: 1.5rem; background: white; border-radius: 12px; border-left: 4px solid var(--primary-green); box-shadow: var(--shadow-sm); transition: all 0.3s ease; height: 100%;">
                            <h6 style="color: var(--text-dark); margin-bottom: 0.5rem; font-size: 1.1rem; font-weight: 600; display: flex; align-items: center; gap: 0.5rem;">
                                <i class="fas fa-shield-alt" style="color: var(--primary-green);"></i>
                                Seguridad
                            </h6>
                            <p style="color: var(--text-light); line-height: 1.6; font-size: 0.95rem; margin: 0;">
                                El mantenimiento regular garantiza que el auto esté en condiciones óptimas de funcionamiento, reduciendo el riesgo de accidentes.
                            </p>
                        </div>
                    </div>
                    
                    <div class="col-md-6 mb-4">
                        <div style="padding: 1.5rem; background: white; border-radius: 12px; border-left: 4px solid var(--primary-green); box-shadow: var(--shadow-sm); transition: all 0.3s ease; height: 100%;">
                            <h6 style="color: var(--text-dark); margin-bottom: 0.5rem; font-size: 1.1rem; font-weight: 600; display: flex; align-items: center; gap: 0.5rem;">
                                <i class="fas fa-chart-pie" style="color: var(--primary-green);"></i>
                                Control de Costos
                            </h6>
                            <p style="color: var(--text-light); line-height: 1.6; font-size: 0.95rem; margin: 0;">
                                Llevar un registro permite identificar patrones de gastos y planificar el presupuesto de mantenimiento.
                            </p>
                        </div>
                    </div>
                    
                    <div class="col-md-6 mb-4">
                        <div style="padding: 1.5rem; background: white; border-radius: 12px; border-left: 4px solid var(--primary-green); box-shadow: var(--shadow-sm); transition: all 0.3s ease; height: 100%;">
                            <h6 style="color: var(--text-dark); margin-bottom: 0.5rem; font-size: 1.1rem; font-weight: 600; display: flex; align-items: center; gap: 0.5rem;">
                                <i class="fas fa-certificate" style="color: var(--primary-green);"></i>
                                Cumplimiento de Garantías
                            </h6>
                            <p style="color: var(--text-light); line-height: 1.6; font-size: 0.95rem; margin: 0;">
                                Tener un registro de los servicios puede ayudar a asegurar que se cumplan las condiciones de la garantía.
                            </p>
                        </div>
                    </div>
                    
                    <div class="col-md-6 mb-4">
                        <div style="padding: 1.5rem; background: white; border-radius: 12px; border-left: 4px solid var(--primary-green); box-shadow: var(--shadow-sm); transition: all 0.3s ease; height: 100%;">
                            <h6 style="color: var(--text-dark); margin-bottom: 0.5rem; font-size: 1.1rem; font-weight: 600; display: flex; align-items: center; gap: 0.5rem;">
                                <i class="fas fa-search" style="color: var(--primary-green);"></i>
                                Diagnóstico de Problemas
                            </h6>
                            <p style="color: var(--text-light); line-height: 1.6; font-size: 0.95rem; margin: 0;">
                                Un historial detallado ayuda a los mecánicos a diagnosticar problemas más rápidamente.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4">
                <div style="display: flex; flex-direction: column; justify-content: center; height: 100%; padding: 2rem;">
                    <div style="background: white; border-radius: 16px; padding: 2rem; text-align: center; box-shadow: var(--shadow-lg);">
                        <i class="fas fa-smile" style="font-size: 3rem; color: var(--primary-green); margin-bottom: 1rem;"></i>
                        <h5 style="color: var(--text-dark); margin-bottom: 1rem;">Satisfacción del Propietario</h5>
                        <p style="color: var(--text-light); line-height: 1.6;">
                            Saber que tu vehículo está bien mantenido proporciona tranquilidad y satisfacción completa.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="text-center mt-4"> <!-- Reduced from mt-5 to mt-4 -->
            <div style="background: white; border-radius: 16px; padding: 2rem; border: 2px solid var(--primary-green); box-shadow: var(--shadow-sm);">
                <h5 style="font-size: 1.3rem; font-weight: 600; color: var(--text-dark); margin: 0;">
                    <i class="fas fa-check-circle" style="color: var(--primary-green); margin-right: 0.5rem;"></i>
                    Llevar un control adecuado no solo extiende la vida útil del vehículo, sino que también garantiza que se conduzca de manera segura y eficiente.
                </h5>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="page-section animate-on-scroll">
    <div class="container-modern">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <h2 style="font-size: 2.5rem; font-weight: 700; margin-bottom: 1rem; color: var(--text-dark);">
                    ¿Listo para comenzar?
                </h2>
                <p style="font-size: 1.2rem; color: var(--text-light); margin-bottom: 2rem;">
                    Únase a nuestra comunidad de usuarios que ya confían en AutoCare para gestionar sus vehículos de manera inteligente.
                </p>
                <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                    <a href="{% url 'register' %}" class="btn btn-yellow btn-lg">
                        <i class="fas fa-rocket"></i>
                        Comenzar Gratis
                    </a>
                    <a href="{% url 'login' %}" class="btn btn-outline btn-lg">
                        <i class="fas fa-sign-in-alt"></i>
                        Ya tengo cuenta
                    </a>
                </div>
            </div>
            <div class="col-lg-4">
                <div style="text-align: center; padding: 2rem;">
                    <div style="background: white; border-radius: 16px; padding: 2rem; box-shadow: var(--shadow-lg);">
                        <i class="fas fa-key" style="font-size: 3rem; color: var(--primary-green); margin-bottom: 1rem;"></i>
                        <h4 style="color: var(--text-dark); margin-bottom: 1rem;">Acceso Inmediato</h4>
                        <p style="color: var(--text-light);">Configure su cuenta en menos de 2 minutos</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Additional Styles and JavaScript -->
<style>
/* FIXED: Page sections with proper scroll offset for fixed header */
.page-section {
    padding: 4rem 0; /* Consistent spacing */
    scroll-margin-top: 70px; /* Adjusted for current header height */
}

/* Stats Grid */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
}

.stat-item {
    padding: 2rem 1rem;
    border-radius: 16px;
    text-align: center;
    transition: all 0.3s ease;
}

.stat-item:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0,0,0,0.1);
}

.stat-number {
    display: block;
    font-weight: 800;
    margin-bottom: 0.5rem;
    font-size: 3rem !important;
}

.stat-label {
    display: block;
    font-size: 1.1rem;
    font-weight: 500;
}

/* FIXED: Smooth scroll behavior */
html {
    scroll-behavior: smooth;
}

.smooth-scroll {
    scroll-behavior: smooth;
}

/* Animation classes */
.animate-on-scroll {
    opacity: 0;
    transform: translateY(30px);
    transition: all 0.8s ease;
}

.animate-on-scroll.animated {
    opacity: 1;
    transform: translateY(0);
}

/* Modern card hover effects */
.modern-card {
    transition: all 0.3s ease;
}

.modern-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 40px rgba(0,0,0,0.1);
}

/* FIXED: Responsive adjustments */
@media (max-width: 768px) {
    .page-section {
        padding: 3rem 0; /* Reduced padding for mobile */
    }
    
    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 1rem;
    }
}

@media (max-width: 480px) {
    .page-section {
        padding: 2.5rem 0; /* Further reduced for small screens */
    }
    
    .stats-grid {
        grid-template-columns: 1fr;
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // FIXED: Enhanced smooth scroll with proper offset for current header
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                const offsetTop = target.offsetTop - 70; // Adjusted for current header height
                window.scrollTo({
                    top: offsetTop,
                    behavior: 'smooth'
                });
            }
        });
    });

    // Animate on scroll
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('animated');
            }
        });
    }, observerOptions);

    document.querySelectorAll('.animate-on-scroll').forEach(el => {
        observer.observe(el);
    });

    // Counter animation for stats (FIXED - starts from 0)
    function animateCounter(element, target, duration = 2000) {
        let start = 0;
        const increment = target / (duration / 16);
        element.textContent = '0'; // Ensure it starts at 0
        
        function updateCounter() {
            start += increment;
            if (start < target) {
                element.textContent = Math.ceil(start);
                requestAnimationFrame(updateCounter);
            } else {
                element.textContent = target;
            }
        }
        updateCounter();
    }

    // Stats counter animation (FIXED - only triggers once and starts from 0)
    const statsObserver = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const counters = entry.target.querySelectorAll('.stat-number');
                counters.forEach(counter => {
                    const target = parseInt(counter.getAttribute('data-target'));
                    if (target && !counter.classList.contains('animated-counter')) {
                        counter.classList.add('animated-counter');
                        animateCounter(counter, target);
                    }
                });
                statsObserver.unobserve(entry.target); // Stop observing after first animation
            }
        });
    }, { threshold: 0.5 });

    const statsSection = document.querySelector('.stats-grid');
    if (statsSection) {
        statsObserver.observe(statsSection.closest('.page-section'));
    }

    // FIXED: Enhanced click handler for navbar "Acerca" to scroll to benefits section
    document.addEventListener('click', function(e) {
        // Check if clicked element or its parent contains "Acerca" text
        const clickedElement = e.target;
        const elementText = clickedElement.textContent ? clickedElement.textContent.trim() : '';
        
        if (elementText === 'Acerca' || elementText === '¿Por qué AutoCare?' || 
            clickedElement.getAttribute('href') === '#benefits') {
            e.preventDefault();
            const benefitsSection = document.getElementById('benefits');
            if (benefitsSection) {
                const offsetTop = benefitsSection.offsetTop - 70; // Adjusted for current header height
                window.scrollTo({
                    top: offsetTop,
                    behavior: 'smooth'
                });
            }
        }
    });
});
</script>
{% endblock %}